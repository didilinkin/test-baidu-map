function ulListControl(){this.defaultAnchor=BMAP_ANCHOR_TOP_LEFT,this.defaultOffset=new BMap.Size(10,10)}function addMarker(e){var n=new BMap.Marker(e);map.addOverlay(n)}function loadPoint(e){$.each(e,function(e,n){var a=new BMap.Marker(new BMap.Point(n.lng,n.lat));map.addOverlay(a);var t="楼盘编码："+n.code+"<br/>楼盘名称："+n.name,o=new BMap.InfoWindow("<p style='font-size:12px;'>"+t+"</p>");a.addEventListener("click",function(){this.openInfoWindow(o)})})}var map=new BMap.Map("allmap"),mPoint=new BMap.Point(120.3845,36.071702);map.addControl(new BMap.NavigationControl({anchor:BMAP_ANCHOR_TOP_RIGHT,type:BMAP_NAVIGATION_CONTROL_SMALL})),map.enableScrollWheelZoom(),map.centerAndZoom(mPoint,15);var circle=new BMap.Circle(mPoint,1e3,{fillColor:"#FF2725",strokeWeight:2,strokeColor:"#FF2725",fillOpacity:.07,strokeOpacity:1});ulListControl.prototype=new BMap.Control,ulListControl.prototype.initialize=function(e){var n=document.createElement("ul");n.id="ulList";for(var t=null,o=["周边房源","交通","快餐","餐厅","银行","酒店"],i=["housing","traffic","snack","restaurant","bank","hotel"],r=0;r<6;r++)t=document.createElement("li"),a=document.createElement("a"),a.setAttribute("herf","#"),a.appendChild(document.createTextNode(o[r])),a.id="search-"+i[r],n.appendChild(t),t.appendChild(a);return e.getContainer().appendChild(n),n};var myUlListControl=new ulListControl;map.addControl(myUlListControl),map.addOverlay(circle);var local=new BMap.LocalSearch(map,{renderOptions:{map:map,autoViewport:!1}});local.searchNearby("酒店",mPoint,1e3),document.getElementById("search-housing").onclick=function(){loadPoint(buildingMarker),map.setViewport(buildingMarker)},document.getElementById("search-traffic").onclick=function(){local.searchNearby("公交",mPoint,1e3)},document.getElementById("search-snack").onclick=function(){local.searchNearby("快餐",mPoint,1e3)},document.getElementById("search-restaurant").onclick=function(){local.searchNearby("餐厅",mPoint,1e3)},document.getElementById("search-bank").onclick=function(){local.searchNearby("银行",mPoint,1e3)},document.getElementById("search-hotel").onclick=function(){local.searchNearby("酒店",mPoint,1e3)};var buildingMarker=[{code:"A001",name:"市政府",lng:"120.389014",lat:"36.073178",r_count:22,priceBeginning:10,beginUnit:"元"},{code:"A002",name:"世贸中心",lng:"120.383566",lat:"36.06843",r_count:22,priceBeginning:10,beginUnit:"元"},{code:"A003",name:"亚麦国际中心",lng:"120.383597",lat:"36.217307",r_count:22,priceBeginning:10,beginUnit:"元"}];